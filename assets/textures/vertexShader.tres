[gd_resource type="ShaderMaterial" load_steps=5 format=2]

[ext_resource path="res://assets/textures/Brick 1.PNG" type="Texture" id=1]
[ext_resource path="res://assets/textures/Metal Floor 2.PNG" type="Texture" id=2]
[ext_resource path="res://assets/textures/Cement.png" type="Texture" id=3]

[sub_resource type="Shader" id=1]
code = "shader_type spatial;
render_mode cull_disabled;

uniform sampler2D walls;
uniform sampler2D floors;
uniform sampler2D ceiling;

void vertext() {
	
}

void fragment() {
	vec4 wrld_vertex = CAMERA_MATRIX * vec4(VERTEX, 1.0);
	NORMAL *= mat3(INV_CAMERA_MATRIX);
	vec4 wallText = texture(walls, UV.yx * 2.0);
	vec4 floorsText = texture(floors, wrld_vertex.xz / 2.0);
	vec4 ceilingText = texture(ceiling, wrld_vertex.xz / 2.0);
	if (NORMAL.y <= -0.9) {
		ALBEDO = ceilingText.rgb;
	}
	else if (NORMAL.y >= 0.9) {
		ALBEDO = floorsText.rgb;
	}
	else {
		ALBEDO = wallText.rgb; //mix(floorsText.rgb, , );
	}
}"

[resource]
shader = SubResource( 1 )
shader_param/walls = ExtResource( 1 )
shader_param/floors = ExtResource( 2 )
shader_param/ceiling = ExtResource( 3 )
